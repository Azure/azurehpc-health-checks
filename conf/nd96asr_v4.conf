# NHC Configuration File
#
# Lines are in the form "<hostmask>||<check>"
# Hostmask is a glob, /regexp/, or {noderange}
# Comments begin with '#'
#
# This file was automatically generated by nhc-genconf
# Fri Jan 14 21:17:09 UTC 2022
#

#######################################################################
###
### NHC Configuration Variables
###
# * || export MARK_OFFLINE=1 NHC_CHECK_ALL=0


#######################################################################
###
### Hardware checks
###
 * || check_hw_cpuinfo 2 96 96
 * || check_hw_physmem 928858388kB 928858388kB 3%
 * || check_hw_swap 0kB 0kB 3%
#  * || check_hw_ib 40 mlx5_an0:1
#  * || check_hw_eth eth1
 * || check_hw_ib 200 mlx5_ib0:1
 * || check_hw_ib 200 mlx5_ib1:1
 * || check_hw_ib 200 mlx5_ib2:1
 * || check_hw_ib 200 mlx5_ib3:1
 * || check_hw_ib 200 mlx5_ib4:1
 * || check_hw_ib 200 mlx5_ib5:1
 * || check_hw_ib 200 mlx5_ib6:1
 * || check_hw_ib 200 mlx5_ib7:1
 * || check_hw_eth ib7
 * || check_hw_eth ib3
 * || check_hw_eth docker0
 * || check_hw_eth lo
 * || check_hw_eth ib6
 * || check_hw_eth ib5
 * || check_hw_eth ib4
 * || check_hw_eth ib0
 * || check_hw_eth ib2
 * || check_hw_eth eth0
 * || check_hw_eth ib1


#######################################################################
###
### Process checks
###
 * || check_ps_loadavg 192
 * || check_ps_service -S -u root -m 'sshd:' sshd


#######################################################################
####
#### GPU checks
####
 * || check_nvsmi_healthmon
 * || check_app_gpu_clocks
 * || check_cuda_bw 24
 * || check_gpu_ecc 20000000 10000
 * || check_gpu_clock_throttling
 * || check_nccl_allreduce 228.0 10 /opt/microsoft/ndv4-topo.xml 16G


#######################################################################
####
#### Additional IB checks
####
 * || check_ib_bw_gdr 185.0 nd96asr_v4
 #* || check_nccl_allreduce_ib_loopback 18.0 1 /opt/microsoft/ndv4-topo.xml 16G
 * || check_ib_link_flapping 6
